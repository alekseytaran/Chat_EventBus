<!DOCTYPE html>
<html>

<head> 
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.js"></script>
    <script type="text/javascript" src="models/user.js"> </script>
    <script type="text/javascript" src="eventbus.js"> </script>
	<script type="text/javascript" src="models/message.js"> </script>
    <script type="text/javascript" src="chatRoomView.js"> </script>
	<script type="text/javascript" src="models/chatRoomModel.js"> </script>
	<script type="text/javascript">
		var chat = function(rootDivId) {

            var eb = new EventBus();
            var users = [new User('vasya', 0), new User('masha', 1), new User('dasha', 2)];

			var chatRoomModel = new ChatRoomModel(eb, users);

            var chatRoomView = new ChatRoomView(users);
            chatRoomView.init();

			chatRoomView.listnerClick(eb, function(message) {
				eb.postMessage("ADDED_MESSAGE", message);
			});
			eb.registerConsumer("ADDED_MESSAGE", chatRoomModel.validatedToPush.bind(chatRoomModel));
            eb.registerConsumer("RERENDER_UI", chatRoomView.renderUI);
		}

	$(function() {
		new chat('Main_chat');
	});

</script>

</head>

<body>

Vasya:
<div id='vasya'> </div>

Masha:
<div id='masha'> </div>

Dasha:
<div id='dasha'> </div>

Chat area:
<div id='chatArea'> </div>


</body>

 </html>
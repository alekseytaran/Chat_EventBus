<!DOCTYPE html>
<html>

<head> 
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.js"></script>
	<script type="text/javascript" src="listnerClick.js"> </script>
	<script type="text/javascript" src="eventbus.js"> </script>	
	<script type="text/javascript" src="generateInnerHtml.js"> </script>
	<script type="text/javascript" src="message.js"> </script>
	<script type="text/javascript" src="chatRoom.js"> </script>
	<script type="text/javascript">
		var chat = function(rootDivId) {
	
			var eb = new EventBus();
			var chatRoom = new ChatRoom();
			
			var user1 = {
				name: 'vasya'
			};
			var user2 = {
				name: 'masha'
			};
			
			var users = [user1, user2];
	
			for(var i = 0; i < users.length; i++) {
					(new generateHtml(users[i].name)).innerCode();
			}
			(new generateHtml()).chatArea();
			
			listnerClick(users, function(message) {
				eb.postMessage(message);
			});
			
			eb.registerConsumer(user1, chatRoom.onMessage.bind(chatRoom));
			eb.registerConsumer(user2, chatRoom.onMessage.bind(chatRoom));
		}

	$(function() {
		new chat('Main_chat');
	});

</script>

</head>

<body> 

Vasya:
<div id='vasya'> </div>

Masha:
<div id='masha'> </div>

Chat area:
<div id='chatArea'> </div>


</body>

 </html>